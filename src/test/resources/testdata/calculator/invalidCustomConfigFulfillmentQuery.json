{
  "id": "${id}",
  "type": "${type}",
  "metadata": {
    "name": "Valid Custom Config file - Prostate MRI and Pylarify PSMA PET/CT",
    "description": "This is a voluntary research study to find out how using technology including advanced magnetic resonance imaging (MRI) and prostate-specific membrane antigen - positron emission tomography (PSMA-PET) scan imaging",
    "status": "NOT YET RECRUITING",
    "phase": "4",
    "link": "https://clinicaltrials.gov/study/NCT05568537?cond=Prostate%20Cancer&titles=radiotherapy&aggFilters=phase:4,sex:m,status:rec%20not&rank=1"
  },
  "variables": [
    {
      "id": "psa",
      "definition": {
        "fulfillment": {
          "queries": [
            {
              "alias": "PSA",
              "query": {
                "from": "patient",
                "show": [
                  "attributes.value"
                ],
                "dedup": true
              }
            }
          ]
        },
        "ai": null
      },
      "display": "Patient's PSA Criteria",
      "value": null
    }
  ],
  "outputs": [
    {
      "id": "psa_criteria",
      "display": "PSA General Tumor Marker Test Result greater then 30 and less then 60",
      "metadata": {
        "type": "exclusion"
      },
      "states": [
        {
          "id": "MET",
          "items": [
            {
              "id": "isPsaGt30",
              "display": "PSA greater then 30ng/mL",
              "expression": "variables.psa.value[].attributes.value|[0] >= `30`"
            },
            {
              "id": "isPsaLt60",
              "display": "PSA less then 60ng/mL",
              "expression": "variables.psa.value[].attributes.value|[0] <= `60`"
            }
          ],
          "expression": "([?id=='isPsa'].value|[0]) && ([?id=='isPsaL'].value|[0])"
        },
        {
          "id": "NOT_MET",
          "items": [
            {
              "id": "isPsaGt30",
              "display": "PSA greater then 30ng/mL",
              "expression": "variables.psa.value[].attributes.value < `30`"
            },
            {
              "id": "isPsaLt60",
              "display": "PSA less then 60ng/mL",
              "expression": "variables.psa.value[].attributes.value > `60`"
            }
          ],
          "expression": "!(isPsaGt30 && isPsaLt60)"
        }
      ]
    },
    {
      "id": "imaging_criteria",
      "display": "Staging 68Ga PMSA-11 PET -CT or -MRI performed within 90 days of registration",
      "metadata": {
        "type": "inclusion"
      },
      "states": [
        {
          "id": "LIKELY_MET",
          "items": [
            {
              "id": "PetCtDate",
              "display": "Date of PET CT",
              "expression": "variables.pet-ct.value[].attributes.date|[0]"
            },
            {
              "id": "Is68GaPMSA_11",
              "display": "radioactive imaging agent for localize prostate cancer cells.",
              "expression": "variables.pet-ct.value[].attributes.type|[0] ==`68Ga PMSA-11`"
            },
            {
              "id": "MriDate",
              "display": "Date of MRI",
              "expression": "variables.mri.value[].attributes.date|[0]"
            },
            {
              "id": "RegistrationDate",
              "display": "Date of registration",
              "expression": "variables.registration.value[].attributes.date|[0]"
            }
          ],
          "expression": "(((delta([?id=='RegistrationDate'].value|[0], [?id=='PetCtDate'].value|[0],`days`)<=`90`) && ([?id=='Is68GaPMSA_11'].value|[0])) || (delta([?id=='RegistrationDate'].value|[0], [?id=='MriDate'].value|[0],`days`)<=`90`))"
        },
        {
          "id": "NOT_MET",
          "items": [
            {
              "id": "PetCtDate",
              "display": "Date of PET CT",
              "expression": "variables.pet-ct.value[].attributes.date|[0]"
            },
            {
              "id": "Is68GaPMSA_11",
              "display": "radioactive imaging agent for localize prostate cancer cells.",
              "expression": "variables.pet-ct.value[].attributes.type|[0] ==`68Ga PMSA-11`"
            },
            {
              "id": "MriDate",
              "display": "Date of MRI",
              "expression": "variables.mri.value[].attributes.date|[0]"
            },
            {
              "id": "RegistrationDate",
              "display": "Date of registration",
              "expression": "variables.registration.value[].attributes.date|[0]"
            }
          ],
          "expression": "!(((delta([?id=='RegistrationDate'].value|[0], [?id=='PetCtDate'].value|[0],`days`)<=`90`) && ([?id=='Is68GaPMSA_11'].value|[0])) || (delta([?id=='RegistrationDate'].value|[0], [?id=='MriDate'].value|[0],`days`)<=`90`))"
        }
      ]
    }
  ]
}