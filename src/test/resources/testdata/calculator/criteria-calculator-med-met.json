{
  "id": "${id}",
  "type": "${type}",
  "metadata": {
    "name": "Simple configuration with patient date of birth and gender",
    "description": "Simple configuration with patient date of birth and gender - The purpose of this study is to assess the safety, tolerability and preliminary efficacy of CC-94676 in men with progressive metastatic castration resistant prostate cancer.",
    "status": "Recruiting",
    "phase": "1",
    "link": "https://clinicaltrials.gov/study/NCT04428788?a=23",
    "usingAi": false
  },
  "constants": null,
  "variables": [
    {
      "id": "dob",
      "definition": {
        "fulfillment": {
          "queries": [
            {
              "alias": "PATIENT",
              "query": {
                "from": "patient",
                "show": [
                  "attributes.dob"
                ],
                "dedup": true
              }
            }
          ]
        },
        "ai": null
      },
      "display": "Patient's date of birth",
      "value": null,
      "usingAi": false
    },
    {
      "id": "gender",
      "definition": {
        "fulfillment": {
          "queries": [
            {
              "alias": "PATIENT",
              "query": {
                "from": "patient",
                "show": [
                  "attributes.gender"
                ],
                "dedup": true
              }
            }
          ]
        },
        "ai": null
      },
      "display": "Patient's gender",
      "value": null,
      "usingAi": false
    },
    {
      "id": "ADT",
      "definition": {
        "fulfillment": {
          "queries": [
            {
              "alias": "ADT",
              "query": {
                "show": [
                  "attributes.code"
                ],
                "filter": {
                  "must": [
                    {
                      "attributes.code.$coding.display": {
                        "eq": "leuprolide"
                      }
                    }
                  ]
                },
                "from": "medication",
                "limit": 1
              }
            }
          ]
        },
        "ai": null
      },
      "display": "Patient's ADT med",
      "value": null,
      "usingAi": false
    }
  ],
  "outputs": [
    {
      "id": "criteria_age",
      "constants": null,
      "metadata": {
        "expressionRelation": null,
        "type": "inclusion",
        "dependency": [
          "dob"
        ]
      },
      "display": "Age = 18 years",
      "states": [
        {
          "id": "MISSING",
          "items": [
            {
              "id": "dob",
              "display": null,
              "value": null,
              "expression": "exists(variables.dob) == `false`",
              "metadata": {
                "description": "dob is missing",
                "usingAi": false
              },
              "extension": {
                "displayValue": "variables.dob.value[]|[0]"
              }
            }
          ],
          "expression": "dob"
        },
        {
          "id": "MET",
          "items": [
            {
              "id": "isAgeEq18",
              "display": "Age is 18",
              "value": null,
              "expression": "variables.dob.value[].attributes.dob|abs_date_diff([0], `2024-08-07`,`years`) = `18`",
              "metadata": {
                "description": "Age is 18",
                "usingAi": false
              },
              "extension": {
                "displayValue": "variables.dob.value[].attributes.dob|abs_date_diff([0], `2024-08-07`,`years`,`int`)"
              }
            }
          ],
          "expression": "isAgeEq18"
        },
        {
          "id": "NOT_MET",
          "items": [
            {
              "id": "isAgeGt18",
              "display": "[NOT_MET]: Age is greater than 18",
              "value": null,
              "expression": "variables.dob.value[].attributes.dob|abs_date_diff([0], `2024-08-07`,`years`) > `18`",
              "metadata": {
                "description": "Age is greater than 18",
                "usingAi": false
              },
              "extension": {
                "displayValue": "variables.dob.value[].attributes.dob|abs_date_diff([0], `2024-08-07`,`years`,`int`)"
              }
            }
          ],
          "expression": "!(isAgeGt18)"
        }
      ]
    },
    {
      "id": "criteria_female",
      "constants": null,
      "metadata": {
        "expressionRelation": null,
        "type": "inclusion",
        "dependency": [
          "gender"
        ]
      },
      "display": "Gender is female",
      "states": [
        {
          "id": "MISSING",
          "items": [
            {
              "id": "gender",
              "display": null,
              "value": null,
              "expression": "exists(variables.gender) == `false`",
              "metadata": {
                "description": "gender is missing",
                "usingAi": false
              },
              "extension": {
                "displayValue": "variables.gender.value[].attributes.gender|[0]"
              }
            }
          ],
          "expression": "gender"
        },
        {
          "id": "MET",
          "items": [
            {
              "id": "gender",
              "display": "Gender is female",
              "value": null,
              "expression": "variables.gender.value[].attributes.gender|[0]== `female`",
              "metadata": {
                "description": "Gender is female",
                "usingAi": false
              },
              "extension": {
                "displayValue": "variables.gender.value[].attributes.gender|[0]",
                "sourcesGender": "\nvariables.gender.value[].{\nauthor:attributes.author,\ndate:date,\ntitle:[attributes.code.coding[].display|[0],attributes.code.text][?@]|[0],\nstatus:attributes.status,\nusingAi:`false`,\nentityType :type,\nentityId :id,\nversion:patient_version\n}\n"
              }
            }
          ],
          "expression": "gender"
        },
        {
          "id": "NOT_MET",
          "items": [
            {
              "id": "gender",
              "display": "Gender is male",
              "value": null,
              "expression": "variables.gender.value[].attributes.gender|[0]== `male`",
              "metadata": {
                "description": "Gender is male",
                "usingAi": false
              },
              "extension": {
                "displayValue": "variables.gender.value[].attributes.gender|[0]",
                "sourcesGender": "\nvariables.gender.value[].{\nauthor:attributes.author,\ndate:date,\ntitle:[attributes.code.coding[].display|[0],attributes.code.text][?@]|[0],\nstatus:attributes.status,\nusingAi:`false`,\nentityType :type,\nentityId :id,\nversion:patient_version\n}\n"
              }
            }
          ],
          "expression": "!(gender)"
        }
      ]
    },
    {
      "id": "criteria_ADT",
      "constants": null,
      "metadata": {
        "expressionRelation": null,
        "type": "inclusion",
        "dependency": [
          "ADT"
        ]
      },
      "display": "Progressed on androgen deprivation therapy (ADT) and at least one prior secondary hormonal therapy approved for castration-resistant prostate cancer (CRPC)",
      "states": [
        {
          "id": "MISSING",
          "items": [
            {
              "id": "ADT",
              "display": null,
              "value": null,
              "expression": "exists(variables.ADT) == `false`",
              "metadata": {
                "description": "ADT is missing",
                "usingAi": false,
                "missingState": true
              },
              "extension": {
                "displayValue": "variables.ADT.value[]|[0]"
              }
            }
          ],
          "expression": "ADT"
        },
        {
          "id": "MET",
          "items": [
            {
              "id": "ADT",
              "display": "Progressed on androgen deprivation therapy",
              "value": null,
              "expression": "variables.ADT.value[].attributes.code.coding[]|length(@)>`0`",
              "metadata": {
                "description": "Progressed on androgen deprivation therapy",
                "usingAi": false,
                "missingState": true
              },
              "extension": {
                "displayValue": "variables.ADT.value[].attributes.code.coding[].display|[0]",
                "sourcesAdt": "\nvariables.ADT.value[].{\nauthor:attributes.author,\ndate:date,\ntitle:[attributes.code.coding[].display|[0],attributes.code.text][?@]|[0],\nstatus:attributes.status,\nusingAi:`false`,\nentityType :type,\nentityId :id,\nversion:patient_version\n}\n"
              }
            }
          ],
          "expression": "ADT"
        },
        {
          "id": "NOT_MET",
          "items": [
            {
              "id": "ADT",
              "display": "Progressed on androgen deprivation therapy",
              "value": null,
              "expression": "variables.ADT.value[].attributes.code.coding[]|length(@)>`0`",
              "metadata": {
                "description": "Progressed on androgen deprivation therapy",
                "usingAi": false,
                "missingState": true
              },
              "extension": {
                "displayValue": "variables.ADT.value[].attributes.code.coding[].display|[0]",
                "sourcesAdt": "\nvariables.ADT.value[].{\nauthor:attributes.author,\ndate:date,\ntitle:[attributes.code.coding[].display|[0],attributes.code.text][?@]|[0],\nstatus:attributes.status,\nusingAi:`false`,\nentityType :type,\nentityId :id,\nversion:patient_version\n}\n"
              }
            }
          ],
          "expression": "!(ADT)"
        }
      ]
    }
  ]
}