{
  "id": "${id}",
  "type": "custom",
  "metadata": {
    "name": "Prostate MRI and Pylarify PSMA PET/CT",
    "description": "Complex-criteria-3-OR-items-data-file-This is a voluntary research study to find out how using technology including advanced magnetic resonance imaging (MRI) and prostate-specific membrane antigen - positron emission tomography (PSMA-PET) scan imaging",
    "status": "NOT YET RECRUITING",
    "phase": "4",
    "link": "https://clinicaltrials.gov/study/NCT05568537?cond=Prostate%20Cancer&titles=radiotherapy&aggFilters=phase:4,sex:m,status:rec%20not&rank=1"
  },
  "variables": [
   {
        "id": "psa",
        "definition": {
          "fulfillment": {
            "queries": [
              {
                "alias": "PSA",
                "query": {
                  "from": "patient",
                  "show": [
                    "attributes.value"
                  ],
                  "dedup": true
                }
              }
            ]
          },
          "ai": null
        },
        "display": "Patient's PSA Criteria",
        "value": null
      },
   {
        "id": "medication_statement_dexamethasone",
        "definition": {
          "fulfillment": {
            "queries": [
              {
                "alias": "medication",
                "filter": {
                  "attributes.code.$coding.display":{
                    "eq":"dexamethasone 4 MG Oral Tablet"
                  }
                },
                "query": {
                  "from": "medication"
                }
              }
            ]
          },
          "ai": null
        },
        "display": "Patient's PSA Criteria",
        "value": null
      }
  ],
  "outputs": [
    {
      "id": "psa_criteria",
      "display": "PSA General Tumor Marker Test Result greater then 30 and less then 60",
      "metadata": {
        "type": "exclusion"
      },
      "states": [
        {
          "id": "MET",
          "items": [
            {
              "id": "isPsaGt30",
              "display": "dexamethasone 4 MG Oral Tablet",
              "expression": "variables.psa.value[].attributes.value|[0] >= `30`"
            },
            {
              "id": "isPsaLt60",
              "display": "PSA less then 60ng/mL",
              "expression": "variables.psa.value[].attributes.value|[0] <= `60`"
            }
          ],
          "expression": "(isPsaGt30 && isPsaLt60)"
        },
        {
          "id": "NOT_MET",
          "items": [
            {
              "id": "isPsaGt30",
              "display": "PSA greater then 30ng/mL",
              "expression": "variables.psa.value[].attributes.value < `30`"
            },
            {
              "id": "isPsaLt60",
              "display": "PSA less then 60ng/mL",
              "expression": "variables.psa.value[].attributes.value > `60`"
            }
          ],
          "expression": "!(isPsaGt30 && isPsaLt60)"
        }
      ]
    },
    {
      "id": "medicationCriteria",
      "display": "Staging 68Ga PMSA-11 PET -CT or -MRI performed within 90 days of registration",
      "metadata": {
        "type": "inclusion"
      },
      "states": [
        {
          "id": "MET",
          "items": [
            {
              "id": "PetCtDate",
              "display": "Date of PET CT",
              "expression": "variables.pet-ct.value[].attributes.date|[0]"
            },
            {
              "id": "MriDate",
              "display": "Date of MRI",
              "expression": "variables.mri.value[].attributes.date|[0]"
            },
            {
              "id": "RegistrationDate",
              "display": "Date of registration",
              "expression": "variables.registration.value[].attributes.date|[0]"
            }
          ],
          "expression": "RegistrationDate || MriDate || PetCtDate"
        },
        {
          "id": "NOT_MET",
          "items": [
            {
              "id": "PetCtDate",
              "display": "Date of PET CT",
              "expression": "variables.pet-ct.value[].attributes.date|[0]"
            },
            {
              "id": "MriDate",
              "display": "Date of MRI",
              "expression": "variables.mri.value[].attributes.date|[0]"
            },
            {
              "id": "RegistrationDate",
              "display": "Date of registration",
              "expression": "variables.registration.value[].attributes.date|[0]"
            }
          ],
          "expression": "!(RegistrationDate || MriDate || PetCtDate)"
        }
      ]
    }
  ]
}